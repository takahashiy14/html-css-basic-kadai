var MAF_CROSS=[];function mafcross(t){Array.isArray(t)&&(MAF_CROSS=t),("string"==typeof t||t instanceof String)&&(MAF_CROSS=[t])}!function(){"use strict";const e={COOKIE_MAX_LENGTH:2e3,COOKIE_ELEMENT_DELIMITER:"-",COOKIE_KEYVALUE_DELIMITER:"_",COOKIE_VALUEPARTS_DELIMITER:".",c_prefix:"MDK_",c_expires:365,param_key:"maf"},t={_config:{},set config(t){this._config=t},_cookieName:function(){return this._config.c_prefix+this._config.param_key},_getMaftagUrlParam:function(){var t=this._config.param_key;const e=function(){const t=location.search.substring(1),e=[];if(t){const i=t.split("&");for(let t=0;t<i.length;t++){var o=i[t].split("=");e[o[0]]=o[1]}}return e}();return!!e.hasOwnProperty(t)&&e[t]},_validateNumber:function(t){return void 0!==t&&-1!==t.search(/^[0-9]+$/)},_validateMaftagUrlParam:function(){var t=this._getNewValue();const e=this._getPromotionArray(t);if(e.length<=0)return!1;for(let t=0;t<e.length;t++){var o=e[t].split(this._config.COOKIE_KEYVALUE_DELIMITER);if(o.length<2||!this._validateNumber(o[0]))return!1;o=this._splitMafCookie(o[1]);if(!(this._validateNumber(o[0])&&this._validateNumber(o[1])&&this._validateNumber(o[4])&&this._validateNumber(o[5])))return!1}return!0},_splitMafCookie:function(t){const e=t.split(this._config.COOKIE_VALUEPARTS_DELIMITER);var t=e.shift(),o=e.shift(),i=e.shift(),a=e.pop(),n=e.pop();return[t,o,i,e.join("."),n,a]},_getOldCookie:function(){return a(this._cookieName())},_getOldStorage:function(){return n(this._cookieName())},_getNewValue:function(){return decodeURIComponent(this._getMaftagUrlParam())},_getPromotionArray:function(t){return t?t.split(this._config.COOKIE_ELEMENT_DELIMITER):[]},_getValuePromotionId:function(t){t=t.split(this._config.COOKIE_KEYVALUE_DELIMITER);return t[0]||!1},_getPromotionIds:function(t){const e=[];for(const i in t){var o;!t.hasOwnProperty(i)||(o=this._getValuePromotionId(t[i]))&&e.push(o)}return e},_getOldPromotionIds:function(){var t=this._getPromotionArray(this._getOldCookie());return this._getPromotionIds(t)},_getValuePromotionIds:function(t){t=this._getPromotionArray(t);return this._getPromotionIds(t)},_getSettingPromotionIds:function(t,e){const o=this._getValuePromotionIds(t);var i=this._getValuePromotionIds(e);if(0<i.length)for(let t=0;t<i.length;t++){var a=o.indexOf(i[t]);-1!==a&&delete o[a]}return t&&t.length>this._config.COOKIE_MAX_LENGTH&&o.shift(),o},_getSettingValue:function(t,e){let o="";const i=this._getPromotionArray(t),a=this._getSettingPromotionIds(t,e);for(const r in i){var n;!i.hasOwnProperty(r)||(n=i[r].split(this._config.COOKIE_KEYVALUE_DELIMITER))[0]&&-1!==a.indexOf(n[0])&&(o&&(o+=this._config.COOKIE_ELEMENT_DELIMITER),o+=i[r])}return o&&(o+=this._config.COOKIE_ELEMENT_DELIMITER),o+=e},_getSettingCookie:function(){return this._getSettingValue(this._getOldCookie(),this._getNewValue())},_getSettingStorage:function(){return this._getSettingValue(this._getOldStorage(),this._getNewValue())},setMaftagCookie:function(){if(0===Object.keys(this._config).length)return!1;if(this._validateMaftagUrlParam()){var e=this._getSettingCookie();if(e){var o=this._cookieName(),i=this._config.c_expires;if(o&&e){var a=(new Date).getTime();const r=new Date(a+864e5*i);var a=r.toUTCString(),n=function(t){const e=[".base.ec",".official.ec",".buyshop.jp",".fashionstore.jp",".handcrafted.jp",".kawaiishop.jp",".supersale.jp",".theshop.jp",".shopselect.net",".base.shop",".myshopify.com",".ap.ngrok.io",".appspot.com",".but.jp",".heteml.net",".jp.net",".jpn.com",".netlify.app",".ngrok.io",".official.ec",".sakura.ne.jp",".wixsite.com",".ac.jp",".ad.jp",".co.jp",".ed.jp",".go.jp",".gr.jp",".lg.jp",".ne.jp",".or.jp",".aichi.jp",".akita.jp",".aomori.jp",".chiba.jp",".ehime.jp",".fukui.jp",".fukuoka.jp",".fukushima.jp",".gifu.jp",".gunma.jp",".hiroshima.jp",".hokkaido.jp",".hyogo.jp",".ibaraki.jp",".ishikawa.jp",".iwate.jp",".kagawa.jp",".kagoshima.jp",".kanagawa.jp",".kochi.jp",".kumamoto.jp",".kyoto.jp",".mie.jp",".miyagi.jp",".miyazaki.jp",".nagano.jp",".nagasaki.jp",".nara.jp",".niigata.jp",".oita.jp",".okayama.jp",".okinawa.jp",".osaka.jp",".saga.jp",".saitama.jp",".shiga.jp",".shimane.jp",".shizuoka.jp",".tochigi.jp",".tokushima.jp",".tokyo.jp",".tottori.jp",".toyama.jp",".wakayama.jp",".yamagata.jp",".yamaguchi.jp",".yamanashi.jp"];if(!t)return!1;const o=t.split(".");if(o.length<=1)return!1;t="."+o.pop();let i="."+o.pop()+t;for(;e.some(t=>t===i);)i="."+o.pop()+i;return i}(location.hostname);let t="";t=(t+=o+"="+encodeURIComponent(e)+";")+(" domain="+n+";")+" path=/;",i&&(t+=" expires="+a+";"),t+=" SameSite=lax;",document.cookie=t}}}},setMaftagStorage:function(){return 0!==Object.keys(this._config).length&&(!!function(){try{return localStorage.setItem("x","x"),localStorage.removeItem("x"),1}catch(t){return void console.log("Not Available LocalStorage.")}}()&&void(this._validateMaftagUrlParam()&&(t=this._getSettingStorage())&&localStorage.setItem(this._cookieName(),JSON.stringify(t))));var t}},o={_config:{},set config(t){this._config=t},_cookieName:function(){return this._config.c_prefix+this._config.param_key},_getMafParamValue:function(){let t=a(this._cookieName());return t=t||n(this._cookieName())},_addMafParamUrl:function(t){let e,o;var i=this._getMafParamValue();if(!i)return t;var a=t.match(/(.*)(?!#!)(?=#)(.*)/);o=a?(e=a[1],a[2]):(e=t,"");const n=e.match(/(.*)(?=\?)(.*)/);if(null!=n&&void 0!==n[2]&&n[2].match("[?&]"+this._config.param_key+"="))return t;a="maf="+encodeURIComponent(i);return e+(n?"&":"?")+a+o},_isCrossFqdn:function(){return this._config.CROSS_FQDN&&0<this._config.CROSS_FQDN.length},_isCrossTarget:function(t){t=function(t){if(!t)return!1;t=t.match(/^https?:\/\/(.*?)([a-z0-9][a-z0-9\-]{1,61}[a-z0-9]\.[a-z.]{2,6})[:[0-9]*]?([/].*?)?$/i);return null!==t&&t[1]+t[2]}(t);return t!==location.hostname&&-1!==this._config.CROSS_FQDN.indexOf(t)},_addParamMaf:function(t){if("click"===t.type.toLowerCase()){const o=t.target.closest("a");if(!o)return;var e=o.href;if(!this._isCrossTarget(e))return;o.href=this._addMafParamUrl(e)}"submit"===t.type.toLowerCase()&&"form"===t.target.tagName.toLowerCase()&&(e=t.target.action,this._isCrossTarget(e)&&(t.target.action=this._addMafParamUrl(e)))},crossDomain:function(t){this._isCrossFqdn()&&this._addParamMaf(t)}};var i;function a(e){let o=null;e+="=";const i=document.cookie;var a=i.indexOf(e);if(-1!==a){a=a+e.length;let t=i.indexOf(";",a);-1===t&&(t=i.length),o=decodeURIComponent(i.substring(a,t))}return o}function n(t){let e=null,o=null;try{o=localStorage.getItem(t)}catch(t){console.log("Not Available LocalStorage.")}return e=o?JSON.parse(o):e}!function(){if(window.hasOwnProperty("dataLayer")){const e=window.dataLayer;for(let t=0;t<e.length;t++)if(e[t].hasOwnProperty("event")&&"gtm.dom"===e[t].event)return 1}return}()||(t.config=e,t.setMaftagCookie(),t.setMaftagStorage()),i=function(){t.config=e,t.setMaftagCookie(),t.setMaftagStorage()},document.addEventListener?document.addEventListener("DOMContentLoaded",i,!1):document.attachEvent?document.attachEvent("onreadystatechange",i):document.onreadystatechange=i,i=function(t){e.CROSS_FQDN=MAF_CROSS,o.config=e,o.crossDomain(t)},document.addEventListener?document.addEventListener("click",i,!1):document.attachEvent?document.attachEvent("onclick",i):document.onclick=i,i=function(t){e.CROSS_FQDN=MAF_CROSS,o.config=e,o.crossDomain(t)},document.addEventListener?document.addEventListener("submit",i,!1):document.attachEvent?document.attachEvent("onsubmit",i):document.onsubmit=i}();